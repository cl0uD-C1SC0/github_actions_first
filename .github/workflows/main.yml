name: GitHub Actions Demo
run-name: ${{ github.actor }} Pipeline Deploy üöÄ
on: [push]

jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      # - name: Instalar Pacotes
      #   run : |
      #     sudo apt update -y
      #     sudo apt-get install curl wget unzip -y
          
      # - name: Configurar AWS CLI
      #   if: always()
      #   run: |
      #     aws configure set aws_access_key_id ${{ secrets.AWS_ACCESS_KEY_ID }}
      #     aws configure set aws_secret_access_key ${{ secrets.AWS_SECRET_ACCESS_KEY }}
      #     aws configure set default.region us-east-1

      #     aws sts get-caller-identity
      #   env:
      #     AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
      #     AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}

      # - name: DockerLint (CD)
      #   run: |
      #     docker run --rm -i hadolint/hadolint < Dockerfile

      # - name: Docker build
      #   if: always()
      #   run: |
      #     docker build -t apicontainer .
        
      - name: Install Ansible
        if: always()
        run: |
          sudo mkdir etc/ansible/
          sudo touch etc/ansible/hosts
          sudo apt-add-repository ppa:ansible/ansible
          sudo apt update -y
          sudo apt install ansible
          sudo echo "[servers]" >> /etc/ansible/hosts
          sudo echo "apiwebserver ansible_host="54.146.200.127"
          sudo echo "[all:vars]" >> /etc/ansible/hosts
          sudo echo "ansible_python_interpreter=/usr/bin/python3" >> /etc/ansible/hosts
        env:
          SSH_KEY: ${{ secrets.SSH_KEY_VOCKEY }}

      - run: echo "üçè This job's status is ${{ job.status }}."
